{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Image Processing Page</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css"
          integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
            integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11. 0/umd/popper.min.js"
            integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
            crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"
            integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1"
            crossorigin="anonymous"></script>


    <style>

    </style>
</head>
<body>
{% block content %}

    <div class="container-fluid">
        <div class="header">
            <div class="row">
                <h1 style="margin: 20px auto;">Image Processing Demo</h1>
            </div>
        </div>

        <div class="content">
            <div class="row">
                <div class="col-lg-2">
                    <div class="row">
                        <div class="col-lg-1"></div>
                        <div class="col-lg-10">
                            <ul id="hist-thumbnail"></ul>
                        </div>
                        <div class="col-lg-1"></div>

                    </div>
                </div>

                <div class="col-lg-7">
                    {#                       <div> <canvas id="myCanvas"></canvas></div>#}
                    <div id="imageView">

                        <img id="image" class="img-fluid centered"
                             src="data:image/jpeg;charset=utf-8;base64,{{ image_data }}">
                        {#         <img id= "image" src="/media/1947-1_plg6.png" height="400">}#}
                    </div>

                    <div id="canvas-wrapper"></div>
                    <div id="canvas-toolbar"></div>

                    <div id="histogram"></div>
                    <div id = "truncated-histogram"></div>

                </div>

                <div class="col-lg-3">

                    <div class="form-group row">
                        <div class="col-lg-5">
                            <label class="control-label"> Laplacian</label>
                        </div>
                        <div class="col-lg-5">
                            <button id="btn_laplacian" type="button">Do laplacian</button>
                        </div>
                        <div class="col-lg-2"></div>
                    </div>

                    <div class="form-group row">
                        <div class="col-lg-5">
                            <label class="control-label"> Lower threshold</label>
                        </div>
                        <div class="col-lg-5">
                            <input id="slider-lower-thresh" type="range" min="1" max="255" value="30" step="5">
                        </div>

                        <div class="col-lg-2">
                            <input id="slider-val-lower-thresh" type="text" readonly
                                   style="border:0; color:#f6931f; font-weight:bold;">
                        </div>
                    </div>

                    <div class="form-group row">
                        <div class="col-lg-5">
                            <label class="control-label"> Upper threshold</label>
                        </div>
                        <div class="col-lg-5">
                            <input id="slider-upper-thresh" type="range" min="1" max="255" value="80" step="5">
                        </div>

                        <div class="col-lg-2">
                            <input id="slider-val-upper-thresh" type="text" readonly
                                   style="border:0; color:#f6931f; font-weight:bold;">
                        </div>
                    </div>


                    <div class="form-group row">
                        <div class="col-lg-5">
                            <label class="control-label"> Kmeans</label>
                        </div>
                        <div class="col-lg-5">
                            <input id="slider-kmeans" type="range" min="1" max="10" value="3" step="1">
                        </div>

                        <div class="col-lg-2">
                            <input id="slider-val-kmeans" type="text" readonly
                                   style="border:0; color:#f6931f; font-weight:bold;">
                        </div>
                    </div>


                    <div class="form-group row">
                        <div class="col-lg-5">
                            <label class="control-label"> Label of region to extract: </label>
                        </div>
                        <div class="col-lg-3">
                            <input id="crystal_label" type="number" placeholder="2">
                        </div>
                        <div class="col-lg-1"></div>

                        <div class="col-lg-3 centered">
                            <button id="btn_extract_crystal_mask">Extract</button>
                        </div>
                    </div>
                    {#                     <button type="button" class="btn btn-info" data-toggle="collapse" data-target="#opening">Opening</button>#}
                    <div id="opening" class="panel-group">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" href="#opening-collapse-sec">Opening operation</a>
                                </h4>
                            </div>
                            <div id="opening-collapse-sec" class="panel-collapse collapse">
                                <ul class="list-group">
                                    <div class="form-group row ">
                                        <div class="col-lg-5">
                                            <label class="control-label"> Opening kernel size</label>
                                        </div>
                                        <div class="col-lg-5">
                                            <input id="slider-opening-kernel" type="range" min="1" max="10" value="3"
                                                   step="1">
                                        </div>

                                        <div class="col-lg-2">
                                            <input id="slider-opening-val-kernel" type="text" placeholder="3" readonly
                                                   style="border:0; color:#f6931f; font-weight:bold;">
                                        </div>
                                    </div>


                                    <div class="form-group row">
                                        <div class="col-lg-5">
                                            <label class="control-label"> Opening iterations</label>
                                        </div>
                                        <div class="col-lg-5">
                                            <input id="slider-opening-iter" type="range" min="1" max="5" value="1"
                                                   step="1">
                                        </div>

                                        <div class="col-lg-2">
                                            <input id="slider-opening-val-iter" type="text" placeholder="1" readonly
                                                   style="border:0; color:#f6931f; font-weight:bold;">
                                        </div>

                                    </div>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div id="closing" class="panel-group">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" href="#closing-collapse-sec">Closing operation</a>
                                </h4>
                            </div>
                            <div id="closing-collapse-sec" class="panel-collapse collapse">
                                <ul class="list-group">
                                    <div class="form-group row">
                                        <div class="col-lg-5">
                                            <label class="control-label"> Closing kernel size</label>
                                        </div>
                                        <div class="col-lg-5">
                                            <input id="slider-closing-kernel" type="range" min="1" max="10"
                                                   value="3" step="1">
                                        </div>

                                        <div class="col-lg-2">
                                            <input id="slider-closing-val-kernel" type="text" placeholder="3"
                                                   readonly
                                                   style="border:0; color:#f6931f; font-weight:bold;">
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <div class="col-lg-5">
                                            <label class="control-label"> Closing iterations</label>
                                        </div>
                                        <div class="col-lg-5">
                                            <input id="slider-closing-iter" type="range" min="1" max="5" value="1"
                                                   step="1">
                                        </div>

                                        <div class="col-lg-2">
                                            <input id="slider-closing-val-iter" type="text" placeholder="1" readonly
                                                   style="border:0; color:#f6931f; font-weight:bold;">
                                        </div>

                                    </div>


                                </ul>
                            </div>
                        </div>
                    </div>

                    <div id="erosion" class="panel-group">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" href="#erosion-collapse-sec">Erosion operation</a>
                                </h4>
                            </div>
                            <div id="erosion-collapse-sec" class="panel-collapse collapse">
                                <ul class="list-group">
                                    <div class="form-group row">
                                        <div class="col-lg-5">
                                            <label class="control-label"> Erosing kernel size</label>
                                        </div>
                                        <div class="col-lg-5">
                                            <input id="slider-erosion-kernel" type="range" min="1" max="10"
                                                   value="3" step="1">
                                        </div>

                                        <div class="col-lg-2">
                                            <input id="slider-erosion-val-kernel" type="text" placeholder="3"
                                                   readonly
                                                   style="border:0; color:#f6931f; font-weight:bold;">
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <div class="col-lg-5">
                                            <label class="control-label"> Erosion iterations</label>
                                        </div>
                                        <div class="col-lg-5">
                                            <input id="slider-erosion-iter" type="range" min="1" max="5"
                                                   value="1" step="1">
                                        </div>

                                        <div class="col-lg-2">
                                            <input id="slider-erosion-val-iter" type="text" placeholder="1"
                                                   readonly
                                                   style="border:0; color:#f6931f; font-weight:bold;">
                                        </div>

                                    </div>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div id="dilation" class="panel-group">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" href="#dilation-collapse-sec">Dilation
                                        operation</a>
                                </h4>
                            </div>
                            <div id="dilation-collapse-sec" class="panel-collapse collapse">
                                <ul class="list-group">
                                    <div class="form-group row">
                                        <div class="col-lg-5">
                                            <label class="control-label"> Dilation kernel size</label>
                                        </div>
                                        <div class="col-lg-5">
                                            <input id="slider-dilation-kernel" type="range" min="1" max="10"
                                                   value="3" step="1">
                                        </div>

                                        <div class="col-lg-2">
                                            <input id="slider-dilation-val-kernel" type="text"
                                                   placeholder="3" readonly
                                                   style="border:0; color:#f6931f; font-weight:bold;">
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <div class="col-lg-5">
                                            <label class="control-label"> Dilation iterations</label>
                                        </div>
                                        <div class="col-lg-5">
                                            <input id="slider-dilation-iter" type="range" min="1" max="5"
                                                   value="1" step="1">
                                        </div>

                                        <div class="col-lg-2">
                                            <input id="slider-dilation-val-iter" type="text" placeholder="1"
                                                   readonly
                                                   style="border:0; color:#f6931f; font-weight:bold;">
                                        </div>

                                    </div>
                                </ul>
                            </div>
                        </div>
                    </div>


                    <div class="form-group row">
                        <div class="col-lg-5">
                            <label class="control-label"> All crystals</label>
                        </div>
                        <div class="col-lg-5">
                            <button id="btn_all_crystal" type="button">
                                Show crystals
                            </button>
                        </div>

                        <div class="col-lg-2"></div>
                    </div>

                    <div class="form-group row">
                        <div class="col-lg-5">
                            <label class="control-label"> Num of top area crystals to
                                extract: </label>
                        </div>
                        <div class="col-lg-3">
                            <input id="num_crystal_label" type="number" placeholder="5">
                        </div>
                        <div class="col-lg-1"></div>

                        <div class="col-lg-3 centered">
                            <button id="btn_extract_top_crystal">Extract</button>
                        </div>

                    </div>

                    <div class="form-group row">
                        <div class="col-lg-5">
                            {#                                   <p><label>Drawing tool: <select id="dtool">#}
                            {#        <option value="line">Line</option>#}
                            {#        <option value="rect">Rectangle</option>#}
                            {#        <option value="pencil">Pencil</option>#}
                            {#    </select></label></p>#}
                            <div id="myCanvas-toolbar"></div>
                            <div id="myCanvas-picturepanel"></div>

                        </div>
                    </div>

                    <div class="form-group row">
                        <div class="col-lg-5">
                            <label class="control-label"> Plot histogram </label>
                        </div>
                        <div class="col-lg-5">
                            <button id="btn_histogram" type="button">
                                Plot histogram
                            </button>

                        </div>

                        <div class="col-lg-2"></div>
                    </div>

                       <div class="form-group row">
                        <div class="col-lg-5">
                            <label class="control-label"> Custom histogram </label>
                        </div>
                        <div class="col-lg-2">
                            <input id="hist_min_thresh" type="number" placeholder="10">
                        </div>
                        <div class="col-lg-2">
                            <input id="hist_max_thresh" type ="number" placeholder="110">
                        </div>

                        <div class="col-lg-3 centered">
                            <button id="btn_truncated_hist">Plot histogram</button>
                        </div>
                    </div>

                    <div class="form-group row">
                        <div class="col-lg-2">
                            <button id="btn_undo" type="button" class="btn btn-primary">
                                Undo
                            </button>
                        </div>
                        <div class="col-lg-2">
                            <button id="btn_reset" type="button" class="btn btn-primary">
                                Reset
                            </button>
                        </div>
                    </div>


                </div>

            </div>

        </div>

    </div>

    <link rel="stylesheet" type="text/css" href="{% static 'css/processing_page.css' %}">
    <script src="{% static 'js/processing_page.js' %}"></script>
    </body>

    </html>

{% endblock %}

{#<script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>#}
{#<!--#}
{#<script src="{% static 'js/app.js' %}"></script>#}
{#-->#}

{% block javascript %}

    <script>createPaint(document.getElementById('canvas-wrapper'));</script>
{% endblock %}
